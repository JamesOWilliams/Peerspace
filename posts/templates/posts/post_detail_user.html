{% extends 'layout.html' %}
{% load static %}
{% block body_content %}
<link rel="stylesheet" href="{% static 'posts/css/post.css' %}">
<div class="container mt-5">
  <div class="row">
    <div class="user-post mt-5 col-lg-3">
      <div class="card card-profile mb-4">
        <div class="card-header" style="background-image: url({{ profile_pictures.user_cover_pic }});"></div>
        <div class="card-body text-center">
        <!-- Some post stats to go in here -->
        </div>
      </div>
    </div>
    <ul class="media-list col-lg-6 mt-5 media-list-stream post-body mb-3">
      <li class="media list-group-item post p-4">
        <img class="media-object mr-3 align-self-start" src="http://127.0.0.1:8000{{user_profile_pic}}">
        <div class="media-body pb-4">
          <div class="media-heading">
            <small class="float-right text-muted">{{post.time_since_creation}} days</small>
            <h6><a href="http://127.0.0.1:8000/users/{{post.user.id}}">{{post.user.name}}</a> made the commitment: {{post.title}}</h6>
          </div>
          <p>
            {{post.description}}
          </p>
      </li>
      {% if post.proof_description and post.proof_pic %}
      <div id="accordion{post.id}" role="tablist">
        <div class="card">
          <div class="card-header" role="tab" id="heading{post.id}">
            <h5 class="mb-0">
              <a data-toggle="collapse" href="#collapse{post.id}" aria-expanded="true" aria-controls="collapse{post.id}">
                {{user.name}} submitted proof, it took {{post.days_taken}} day{{post.days_taken|pluralize}}.
              </a>
            </h5>
          </div>
          <div id="collapse{post.id}" class="collapse show" role="tabpanel" aria-labelledby="heading{post.id}" data-parent="#accordion{post.id}">
            <div class="card-body">
              <div class="post-proof">
                <p>{{post.proof_description}}</p>
                <img class="img-fluid d-block m-auto" src="{{post.proof_pic.url}}">
              </div>
          </div>
        </div>
      </div>
    </div>
    {% endif %}
      <div class="post-footer pb-3">
        {% if post.proof_description and post.proof_pic %}
        <a href="http://127.0.0.1:8000/posts/{{post.id}}/prove/delete_confirm/" class="ml-3 pt-3 like-btn"><span class="icon icon-cross"></span> Delete proof</a>
        {% else %}
        <a href="http://127.0.0.1:8000/posts/{{post.id}}/prove/" class="ml-3 pt-3 like-btn"><span class="icon icon-plus"></span> Submit proof</a>
        {% endif %}
        <a href="http://127.0.0.1:8000/posts/{{post.id}}/edit/" class="ml-3 pt-3 like-btn"><span class="icon icon-edit"></span> Edit</a>
        <a href="http://127.0.0.1:8000/posts/{{post.id}}/delete/" class="ml-3 pt-3 like-btn"><span class="icon icon-trash"></span>Delete</a>
    </div>
    </ul>
{% endblock %}
